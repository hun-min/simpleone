/* =========================================
   0. 폰트 및 기본 설정 (리터칭)
   ========================================= */
@import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css");

html, body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  font-family: "Pretendard", -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", sans-serif;
  -webkit-font-smoothing: antialiased; /* 폰트 선명하게 */
}

body {
  overflow-y: auto;
  background: linear-gradient(135deg, #FFF8DC 0%, #FFE4B5 50%, #FFDAB9 100%);
  color: #333333;
  color-scheme: light;
  transition: background 0.3s ease;
}

/* 버튼/입력창 클릭 시 못생긴 파란 테두리 제거 */
*:focus {
  outline: none;
}

.App {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  touch-action: manipulation;
  overflow-x: hidden;
  background-color: transparent;
}

/* =========================================
   1. 캘린더 (기존 유지 + 그림자 부드럽게)
   ========================================= */
.calendar-container {
  display: flex;
  justify-content: center;
  margin: 20px 0;
  width: 100%;
  overflow: visible;
}

.today-btn {
  padding: 6px 12px; /* 터치 영역 확보 */
  font-size: 15px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  transition: transform 0.1s;
}

.today-btn:active {
  transform: scale(0.95);
}

body.dark-mode .today-btn {
  background: #3a3a3a;
  color: #e0e0e0;
}

body.light-mode .today-btn {
  background: #f0f0f0;
  color: #333;
}

.react-calendar {
  border: none !important;
  border-radius: 16px !important; /* 조금 더 둥글게 */
  box-shadow: 0 8px 24px rgba(0,0,0,0.12) !important; /* 그림자 더 부드럽게 */
  padding: 20px !important;
  font-family: inherit !important;
}

.react-calendar__month-view__weekdays {
  border-bottom: none !important;
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 10px;
}

.react-calendar__month-view__weekdays__weekday abbr {
  text-decoration: none !important;
}

.react-calendar__navigation button {
  min-width: 44px;
  background: none;
  font-size: 16px;
  font-weight: bold;
}

.calendar-today-btn {
  position: absolute;
  top: 24px;
  right: 80px;
  padding: 6px 10px;
  font-size: 14px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  z-index: 100;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

body.dark-mode .react-calendar {
  background: #2d2d2d !important;
  color: #e0e0e0;
}

body.light-mode .react-calendar {
  background: #ffffff !important;
}

/* 캘린더 타일 스타일 리터칭 */
.react-calendar__tile {
  border-radius: 8px !important;
  padding: 10px 6px !important;
  font-size: 14px;
  font-weight: 500;
}

body.dark-mode .react-calendar__tile--active {
  background: #3a3a3a !important;
  color: #4CAF50 !important;
  font-weight: bold !important;
  box-shadow: 0 0 0 2px #4CAF50 inset; /* 선택된 날짜 강조 */
}

body.light-mode .react-calendar__tile--active {
  background: #e8f5e9 !important; /* 연한 초록 배경 */
  color: #2e7d32 !important;
  font-weight: bold !important;
}

body.light-mode .react-calendar__tile--now {
  background: #fff3e0 !important; /* 연한 주황 */
  color: #ef6c00 !important;
}

.tile-stats {
  font-size: 10px;
  color: #4CAF50;
  font-weight: bold;
  margin-top: 2px;
}

/* =========================================
   2. 태스크 리스트 (가독성 개선)
   ========================================= */
.task-row {
  display: flex;
  align-items: center;
  gap: 8px; /* 간격 추가 */
  margin: 4px 0;
  padding: 8px 4px; /* 패딩 추가 */
  font-size: 16px; /* 폰트 키움 */
  border-bottom: none;
  min-height: 36px; /* 높이 확보 */
  cursor: pointer;
  background: transparent;
  flex-wrap: nowrap;
  border-radius: 8px; /* 호버 시 둥글게 */
  transition: background-color 0.2s;
}

.task-row:hover {
  background-color: rgba(0,0,0,0.03); /* 호버 효과 */
}

.task-main {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

/* 체크박스 디자인 개선 */
.task-row input[type="checkbox"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
  accent-color: #4CAF50;
  margin: 0;
}

.task-main textarea {
  flex: 1;
  padding: 4px 8px;
  border: 1px solid transparent; /* 기본 테두리 투명 */
  border-radius: 6px;
  font-size: 16px;
  line-height: 1.5;
  resize: none;
  overflow: hidden;
  font-family: inherit;
  transition: background 0.2s, border-color 0.2s;
}

/* 입력 중일 때 스타일 */
.task-main textarea:not([readonly]),
.task-main textarea:focus {
  background: rgba(255, 255, 255, 0.5) !important;
  border-color: rgba(0,0,0,0.1) !important;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

body.dark-mode .task-main textarea {
  color: #e0e0e0;
}

/* 타이머 애니메이션 부드럽게 */
@keyframes timer-pulse {
  0%, 100% { background: rgba(76, 175, 80, 0.05); }
  50% { background: rgba(76, 175, 80, 0.2); }
}

.task-row.timer-active {
  animation: timer-pulse 2s ease-in-out infinite;
  border-radius: 8px;
}

/* =========================================
   3. 팝업 (중요: 중앙 정렬 수정됨)
   ========================================= */
.popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6); /* 배경 조금 더 어둡게 */
  backdrop-filter: blur(4px); /* 블러 효과 추가 */
  display: flex;          /* [수정] 중앙 정렬 핵심 */
  align-items: center;    /* [수정] 수직 중앙 */
  justify-content: center;/* [수정] 수평 중앙 */
  z-index: 10010;
}

.popup {
  padding: 32px;
  border-radius: 20px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25); /* 그림자 강화 */
  width: 90%;
  max-width: 360px;
  text-align: center;
  z-index: 10011;

  /* 팝업 등장 애니메이션 추가 */
  animation: popup-slide-up 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes popup-slide-up {
  from { opacity: 0; transform: translateY(20px) scale(0.96); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

.popup h3 {
  margin: 0 0 24px 0;
  font-size: 20px;
  font-weight: 700;
}

.popup-input,
.popup input[type="text"],
.popup input[type="password"] {
  width: 100%;
  padding: 14px;
  font-size: 16px;
  border-radius: 10px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0,0,0,0.03);
  box-sizing: border-box;
  margin-bottom: 16px;
  transition: all 0.2s;
}

.popup input:focus {
  background: #fff;
  box-shadow: 0 0 0 2px #4CAF50;
  border-color: transparent;
}

/* 팝업 버튼 개선 */
.popup-buttons {
  display: flex;
  gap: 12px;
  margin-top: 8px;
}

.popup-buttons button {
  flex: 1;
  padding: 14px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  font-size: 16px;
  font-weight: 600;
  transition: transform 0.1s, filter 0.2s;
}

.popup-buttons button:active {
  transform: scale(0.96); /* 눌리는 느낌 */
}

/* 확인 버튼 */
.popup-buttons button:first-child {
  background: #4CAF50;
  color: white;
  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
}

/* 취소 버튼 */
body.light-mode .popup-buttons button:last-child {
  background: #f0f0f0;
  color: #333;
}

body.dark-mode .popup-buttons button:last-child {
  background: #444;
  color: #e0e0e0;
}

body.dark-mode .popup {
  background: #2d2d2d;
  color: #fff;
}
body.light-mode .popup {
  background: #ffffff;
  color: #333;
}

/* =========================================
   4. 헤더 및 컨트롤
   ========================================= */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
  flex-wrap: nowrap;
  gap: 10px;
}

.header h1 {
  font-size: 28px; /* 제목 키움 */
  font-weight: 800;
  letter-spacing: -0.5px;
}

.header select, .header button {
  height: 36px;
  border-radius: 8px;
}

/* 메인 액션 버튼 (원하는 것 이루기) */
.App > button {
  padding: 16px 32px;
  background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
  color: white;
  border: none;
  border-radius: 14px;
  cursor: pointer;
  font-size: 17px;
  font-weight: bold;
  margin: 20px 0;
  box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
  transition: transform 0.2s, box-shadow 0.2s;
  width: 100%; /* 모바일 대응 */
  max-width: 400px; /* 너무 커지지 않게 */
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.App > button:active {
  transform: scale(0.96);
}

/* =========================================
   5. 기타 UI 요소 (타임라인 등)
   ========================================= */
.completed-timeline {
  margin: 30px 0;
  padding: 20px;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.05);
  border: 1px solid rgba(0,0,0,0.05);
}

.completed-timeline h3 {
  margin: 0 0 16px 0;
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #888;
}

.timeline-item-compact {
  padding: 8px 12px;
  border-radius: 8px;
  margin-bottom: 6px;
  transition: background 0.2s;
}

.timeline-item-compact:hover {
  background: rgba(0,0,0,0.03);
}

.timeline-time {
  font-weight: 700;
  color: #4CAF50;
  font-variant-numeric: tabular-nums;
}

/* 모바일 최적화 */
@media (max-width: 768px) {
  .App { padding: 16px; }
  .task-row { padding: 10px 4px; }
  .task-main textarea { font-size: 16px; }

  /* 모바일 하단 메뉴 */
  .keyboard-menu {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    padding-bottom: max(10px, env(safe-area-inset-bottom));
    border-top: 1px solid rgba(0,0,0,0.1);
  }

  body.dark-mode .keyboard-menu {
    background: rgba(45, 45, 45, 0.9);
  }
}

/* 기존에 있던 유틸리티 클래스들 유지 */
.view-controls {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
  align-items: center;
}

.icon-btn {
  border-radius: 8px;
  transition: background 0.2s;
}

.icon-btn.active {
  background: #4CAF50 !important;
  color: white !important;
  box-shadow: 0 4px 10px rgba(76,175,80,0.3);
}

/*
   나머지 미세한 스타일들(컨텍스트 메뉴 등)은
   기존 코드의 논리를 그대로 따르되
   border-radius와 shadow만 부드럽게 처리
*/
.context-menu {
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.2);
  border: 1px solid rgba(0,0,0,0.1);
  overflow: hidden;
}
